!function(u){u(document).ready(function(){new Vue({el:"#wp-ultimo-wrap",data:{type:"message",style:"success",message:"",subject:"",previewHTML:""},mounted:function(){postboxes.add_postbox_toggles(pagenow,{}),list.init();var a=this;window.tinyMCE.onAddEditor.add(function(t,e){e.onKeyUp.add(function(t,e){a.message=t.getContent()})}),u(".wp-editor-area").on("keyup",function(){a.message=u(this).val()})},methods:{setType:function(t,e){t.preventDefault(),this.type=e},showModal:function(t,e){t.preventDefault()}}});u("#wu-broadcast-plans").select2({placeholder:wu_broadcast_sender.placeholder_plans}),u("#wu-broadcast-users").select2({minimumInputLength:3,tags:[],ajax:{url:ajaxurl,dataType:"json",type:"GET",quietMillis:50,data:function(t){return{term:t,action:"wu_query_user"}},results:function(t){return{results:u.map(t,function(t){return{text:t.data.display_name+" ("+t.data.user_email+")",slug:t.data.user_login,id:t.data.ID}})}}}}),u(document).on("click","#save-message, #preview-message",function(t){t.preventDefault();var e=u(this),a=e.attr("name"),s=e.html(),n=tinyMCE.get("post_content").getContent();e.attr("disabled","disabled").html(". . ."),u("#wp-ultimo-send-broadcast").block({message:null,overlayCSS:{background:"#F1F1F1",opacity:.4}});var o=e.parents("form").serialize()+"&message_action="+a+"&post_content="+n;u.ajax({url:ajaxurl,method:"post",data:o,dataType:"json",success:function(t){e.html(t.message),u("#wp-ultimo-send-broadcast").unblock(),setTimeout(function(){e.html(s).removeAttr("disabled"),t.status&&"submit"===a&&list.update()},3e3)}})})})}(jQuery);